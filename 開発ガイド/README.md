# 開発ガイド


## はじめに

このドキュメントは、Nablarchを使ってシステム開発を行うエンジニアに対して、開発開始前・開発中になにをすべきか、なにを参照すれば良いかを示すものです。Nablarchを使ったシステム開発に必要と考えているアクティビティについて、多くのプロジェクトで最適と思われる進め方を記載しています。

Nablarch利用プロジェクトの特性を踏まえて、開発プロセスはウォーターフォール開発を想定しています。


プロジェクト本格開始前にこのドキュメントを一通り確認して、開発をどのように進めるか検討してください。


### このドキュメントの対象読者

Nablarchを使ったシステム開発を始めようとしているエンジニア（特にITアーキテクト、プロジェクトマネージャー）を対象としています。

## 全体像

プロジェクト開発で必要となる成果物やタスクは多岐にわたります。
まずは全体を俯瞰し開発の流れを掴みます。
このためには、サンプルプロジェクトの[Nablarchを使用した開発の流れ](../サンプルアプリケーション/設計書/Nablarchを使用した開発の流れ.xlsx)を参照してください。
サンプルプロジェクトにおける開発の流れが図解されています。

### 開発の流れ


Nablarchを使用したシステム開発における標準WBSです。プロジェクト計画時にWBSを確認し、見積もりや役割分担に役立ててください。

- [Nablarch 開発プロセス標準](https://fintan.jp/?p=1145)


## 要件定義工程

### プロジェクト計画

ウォーターフォール開発に必要な作業を漏らさないことを目的として役割分担を決めるシートです。担当間の認識の相違をなくし、リスクの早期発見、問題拡大の未然防止を図ります。

- [ウォーターフォール開発における役割分担シート](https://fintan.jp/?p=1326)


### 要件定義

業務/システム要件定義の進め方、成果物、活用技法、ノウハウを体系的かつ実践的なレベルにまとめたガイドラインです。
- [要件定義フレームワーク](https://fintan.jp/?p=233)


実践的な要件定義知識やテクニックを解説した資料です。
- [要件定義基礎研修テキスト](https://fintan.jp/?p=1389)



#### 非機能要件

性能要件やセキュリティ要件などの非機能要件が固まっていない状態で方式設計を行っても、方式設計は完成しません。
非機能要件定義については、IPAの[非機能要求グレード](https://www.ipa.go.jp/sec/softwareengineering/std/ent03-b.html)
を参考にしてください。


### 方式設計

方式設計は、以下のサンプルをベースに行います。

- [アプリケーション方式設計書サンプル](https://fintan.jp/?p=1323)

ただし、プロジェクトの非機能要件を方式設計に落とし込んでいく必要があるため、このサンプルを修正して方式設計完了としてはいけません。サンプルをコピー、修正して方式設計書を完成させるというやり方をすると、必要な非機能要件を漏らす、不要な方式設計を記載してしまう、というミスが発生します。

サンプルをコピーするのではなく、プロジェクトの方式設計書にサンプルから流用できる箇所、参考にできる箇所を持ってきて完成させるようにしましょう。プロジェクトの非機能要件を元に方式設計の見出しを作成し、サンプルを参考にできる箇所は参考にし、プロジェクト固有の要件で検討が必要な箇所は検討結果を記載し、プロジェクトの方式設計書を完成させます。

特に、性能やセキュリティについては上記サンプルではカバーしていないので、特に注意が必要です。
方式設計サンプルの記述に追記するか、別冊として「方式設計書（セキュリティ設計）」のように別途作成するなどします。

セキュリティ設計については、IPAの[安全なウェブサイトの作り方](https://www.ipa.go.jp/security/vuln/websecurity.html)を参照してください。特に「セキュリティ実装 チェックリスト」について全ての項目が「根本的解決」となるように設計を行います。
重複はありますが、[OWASP Top10](https://github.com/OWASP/Top10)もチェックしておきます。

### 標準化

各工程の開始に間に合うよう、標準化作業を進めます。
以下の標準をベースにして、プロジェクト用にカスタマイズします。

- [Nablarch アプリケーション設計標準](https://fintan.jp/?p=1145)

特に[アプリケーション開発標準](https://github.com/nablarch-development-standards/nablarch-development-standards/tree/master/020_アプリケーション開発標準)を参照してください。

ここにはDB設計標準やUI標準等、重要な設計標準ドキュメントが含まれています。

特にUI標準については、設計工程が本格化する前に展開しておく必要があります。
標準が無い状態で設計を進めてしまうと、画面レイアウト等のUIが設計者やカウンターのお客様ごとにバラけてしまいます。
（例：ボタンの配置位置、確認画面や完了画面の有無、必要以上にリッチなUI機能）
これらは、後で統一するためにお客様承認が必要となったり、横並び修正が発生することになります。
一度提示してしまったUIを撤回できないこともあり、この場合、製造工程で個別の作り込みが必要となり工数オーバーするといったリスクがあります。  
参考：[UI標準のカスタマイズ](docs/assets/ui/ui.md)

カスタマイズ例はサンプルプロジェクトの以下をご覧ください。
- [開発標準](../サンプルアプリケーション/設計書/02_方式設計/20_開発標準/README.md)

### テスト計画


アプリケーション開発プロジェクトの、全体テスト計画で検討すべきトピックを解説したコンテンツです。
- [全体テスト計画ガイド](https://fintan.jp/?p=251)


アプリケーション開発で使用可能なテストの種別と観点を整理したカタログです。
- [テスト種別＆観点カタログ](https://fintan.jp/?p=45)




## 設計工程

### Nablarchプロジェクト初期構築

Nablarchを使ったプロジェクトの初期構築を行います。
こちらを参照してください。

- [Nablarchプロジェクト初期構築](./docs/Nablarchプロジェクト初期構築.md)

### チーム開発環境構築

Gitリポジトリやチャット等、チームで開発を行うための環境構築を行います。

- [チーム開発環境構築](./docs/チーム開発環境構築.md)

### 開発環境構築ガイド作成

アプリケーション開発者向けの環境構築ガイドを整備します。
こちらを参照してください。

- [開発環境構築ガイド作成](./docs/開発環境構築ガイド作成.md)


### 開発標準の整備


Nablarchを使用したシステム開発における標準WBSです。
- [Nablarch 開発プロセス標準](https://fintan.jp/?p=1145)


アプリケーション開発時に使用する設計書フォーマットとサンプルです。
- [Nablarch 設計書フォーマット＆サンプル](https://fintan.jp/?p=1145)


品質、生産性、保守性の向上を目的とした、プログラマーが遵守するべきコーティング規約です。
- [Nablarch コーディング規約](https://fintan.jp/?p=1145)



PG・UT作業の完了条件を開発者が確認するためのチェックリストです。
- [PG・UT作業の完了条件チェックリスト](https://fintan.jp/?p=1367)


コーディング規約違反などの単純なコーディングミスをしていないかを開発者自身が確認するためのチェックリストです。
- [プログラマー向け成果物セルフチェックリスト](https://fintan.jp/?p=1369)



## 製造工程


### 結合テスト準備

結合テスト開始前に、結合テスト環境向けの設定変更および疎通確認を行います。

製造工程でのローカル開発環境から結合テスト環境に移行する際、多くの差異が発生します。
（例:ファイルパスの違い、モックの使用有無）
このため、余裕を持って結合テスト環境用の設定を行う必要があります。
結合テストまでに十分な疎通確認ができていない場合、
テスト開始直後に基盤部分でエラーが頻発し、テスト全体の進捗を遅らせる要因となります。

まず、方式設計書からケースを抽出します。
例えば「認証」に関する記述があれば、認証機能が動作することを確認するケースを上げます。
次に、環境ごとに、前工程での環境差異があるかどうかをチェックします。

以下に例を示します。

| 観点         | UT->IT | IT->ST | ST->本番 | 説明                                           |
|--------------|--------|--------|----------|------------------------------------------------|
| 認証         | 有     | 無     | 有       | IT工程からシステム全体の共通テストデータを使用 |
| 帳票出力     | 無     | 有     | 無       | ライセンスの都合上、帳票出力はSTから実施       |
| ファイル転送 | 有     | 有     | 有       | 環境毎にIPアドレスの変更が必要                 |
| バッチ       | 有     | 無     | 有       | IT工程からシェルスクリプトを使用               |
| 　　：       |        |        |          |                                                |

差異が発生する部分は、その環境に応じた設定変更等を行います。

差異が発生する箇所を中心に疎通確認を行います。
特に、テスト全体への影響が大きい機能(動作しないとテストができないような機能)を優先的にテストします。


## 結合テスト工程

(プロジェクトからのフィードバックを受けて拡充させていく予定です)

## システムテスト工程

(プロジェクトからのフィードバックを受けて拡充させていく予定です)

## 保守運用

(プロジェクトからのフィードバックを受けて拡充させていく予定です)

