# 単体テストの考え方(バッチ)

本プロジェクトのWebアプリケーションでは、プロジェクト独自のテスト方法を定義しています。
（[単体テストの考え方（Web）](単体テストの考え方（Web）.md)）

バッチでは、原則として[Nablarch標準のテスト方法](https://nablarch.github.io/docs/LATEST/doc/development_tools/testing_framework/guide/development_guide/05_UnitTestGuide/index.html)を踏襲します。

開発者が作成する成果物とそのテスト方法を記載します。

| 成果物         | 机上 | クラス単体 | リクエスト単体 |
|----------------|------|------------|----------------|
| Action         | -    | -          | o              |
| Form           | o    | o          | o              |
| ドメインクラス | o    | -          | o              |
| SQLファイル    | o    | -          | o              |
| Entity         | -    | -          | o              |
| DTO            | -    | -          | o              |


## Action

Actionクラスでは、リクエスト単体テストにて動作確認します。


## Form

### Formのアノテーション確認

Formのフィールドに、設計書に記載された通りのアノテーションが付与されていることを確認します。
（必須アノテーションおよびドメインアノテーション）
設計書とFormのソースコードを見比べて、目視で確認を行います。


### バリデーションロジックの確認

必須アノテーションやドメインアノテーション以外で、`@AssertTrue`等を使ってバリデーションロジックを書いている場合、
クラス単体テストの対象とします。

## ドメインクラス

ドメイン定義を保持するクラスであり、ドメイン定義設計書を元に作成します。

ドメイン定義設計書からドメインクラスを作成する際に、間違った定義をしてしまう可能性はあります(例えば、最大桁の写し間違い)。
しかし、限界値分析によるテストコードを書いてその誤りを検知することは非効率であるため、
机上レビューによる確認を行います。



## SQLファイル

設計工程でSQLを検討する必要があるが、机上でSQLを設計してしまうと品質が十分確保できないという問題があります。
このため、設計時点でSQLを試行しながら設計を行うこととし、SQLファイルも同時に作成します。
（このSQLファイルは製造工程へのインプットとなります）

SQLを試行できるよう、SQL Executorを使用します。


## Entity

GSPプラグインで自動生成するため、クラス単体テスト対象外とします。

## DTO

ロジックを含まず、かつアクセサはIDEで自動生成するため、クラス単体テスト対象外とします。

