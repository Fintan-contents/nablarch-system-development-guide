# 取引単体テストのテスト方法（Web）

## 排他制御エラー

1. IDEでアプリを起動します。
1. chormeを起動します(以降ブラウザAと呼びます)。
1. ブラウザAのメニューから「シークレット ウインドウを開く」を選択し、もう1つChormeを起動します (以降ブラウザBと呼びます)。
   ２つのブラウザを開くのはセッションがブラウザ間で共有されてしまうことを防ぐためです。 
1. ブラウザA、ブラウザBともに、同じデータを表示した更新画面に遷移します。
1. ブラウザBで確定を行います。
1. ブラウザAで確定を押したときに排他制御エラーが発生したことを表す画面に遷移することを確認します。

## 二重サブミットエラー

1. IDEでアプリを起動します。
1. ブラウザを起動して、テスト対象の画面まで遷移します。
1. ブラウザでテスト対象のボタンをクリックします。
1. ブラウザの戻る機能で戻ります。
1. テスト対象のボタンをクリックします。  
   ここで、2と同じトークンが送信されるため、二重サブミットエラーを確認できます。


## 「メッセージ表示（項目別）」のテスト

「単体テスト仕様書」→「取引単体①」→「メッセージ表示（項目別）」のテストは、
エラーメッセージが適切な位置に表示されているかを確認します。    
以下の理由により、エラーのバリエーションのテストは行いません。

- 「適切なドメイン付与されていれば、適切なエラーメッセージが出る」ため、エラーのバリエーションのテストは不要であるため。  
  適切なドメインが付与されているか否かは、Formクラスのレビューで担保します。 
- 各項目、エラーメッセージを一種類ずつ確認すれば、バリデーションが機能しているかの確認はできるため。

相関チェックについてはユニットテストでテストします。
