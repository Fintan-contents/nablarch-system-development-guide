# コーディング規約のチェック
## はじめに
ローカルPCで、規約のチェックをするためのガイドです。  
レビュー依頼前に実施してください。

## フォーマット
- [Javaコードフォーマッター](https://github.com/nablarch-development-standards/nablarch-style-guide/blob/master/java/code-formatter.md)  
  解説に従ってフォーマッタを掛けてください。

## コーディング規約チェック
以下の何れかを使用してチェックを行ってください。
- [CheckStyle-IDEA - Plugins | JetBrains](https://plugins.jetbrains.com/plugin/1065-checkstyle-idea)  
  補足：チェックに使用する使用するルールは以下にあります。  
  https://collaborage-ci.keel-dev.net/gitbucket/shaft/proman-project/tree/master/tools/static-analysis/checkstyle
- Maven

### MavenでのCheckstyleの実行方法
チェックは次のコマンドで実施できます。

```sh
mvn checkstyle:check
```

もしチェック違反がある場合は次のように指摘内容がコンソールに出力されます。

```
[INFO] --- maven-checkstyle-plugin:3.0.0:check (default-cli) @ checkstyle-example ---
[INFO] There is 1 error reported by Checkstyle 6.18 with C:\example\checkstyle-example/checkstyle/nablarch-checkstyle.xml ruleset.
[ERROR] src\main\java\com\example\App.java:[9,5] (javadoc) JavadocMethod: Javadoc コメントがありません。
```

すべてのチェックをパスした場合はコンソールに出力されるのは次の1行だけとなります。

```
[INFO] --- maven-checkstyle-plugin:3.0.0:check (default-cli) @ checkstyle-example ---
```



## バグの可能性のあるコードの検知
### MavenでのSpotBugsの実行方法
チェックは次のコマンドで実施できます。

```sh
mvn spotbugs:check
```

もしチェック違反がある場合は次のように指摘内容がコンソールに出力されます。

```
[INFO] --- spotbugs-maven-plugin:3.1.3:check (default-cli) @ spotbugs-example ---
[INFO] BugInstance size is 1
[INFO] Error size is 0
[INFO] Total bugs: 1
[INFO] String オブジェクトを == や != を使用して比較しています。com.example.App.main(String[]) [com.example.App] 該当箇所 App.java:[line 9] ES_COMPARING_STRINGS_WITH_EQ
```

すべてのチェックをパスした場合は次のようにコンソールに出力されます。

```
[INFO] --- spotbugs-maven-plugin:3.1.3:check (default-cli) @ spotbugs-example ---
[INFO] BugInstance size is 0
[INFO] Error size is 0
[INFO] No errors/warnings found
```
