# バージョン管理ルール

## ブランチ作成ルール

原則として[git flow](https://nvie.com/posts/a-successful-git-branching-model/)に準じます。

開発中は、`develop`ブランチと`feature`ブランチだけ意識しておけばOKです。
(`master`や`release`などは開発時は気にしなくてよい）

基本的には、
- `develop`から`feature`ブランチを生やします
- `feature`の開発が終わったら`develop`にマージします
- `feature`が長くなる場合、適宜`develop`からの変更を取り込みます

でOKです。


フィーチャーブランチを作成する場合は、`feature/<フィーチャ名>`としてください。

`<フィーチャ名>`は作成する機能やストーリーから命名します。
名称から内容が想像がつくような命名が望ましいですが、変更内容自体はコミットコメントに記載するので、ブランチ名で区別がつかなくてもOKです。


## developブランチへのマージ

`develop`ブランチには、動作確認が取られ、レビューされたPull Requestだけマージしてください。

`develop`ブランチは開発者全員が使用します。このブランチにコンパイルエラーやバグを埋め込むと開発者全員の作業に支障がでます。
例えば、以下のようなコードをpushしてはいけません。

- コンパイルエラーが発生するコード
- 形式エラーとなる設定ファイル（アプリが起動できなくなります）

自分のコミットが原因でエラーが発生していることがわかった場合は、速やかに対応をしてください。
コメントアウトなどでも良いので、できるだけ早くエラーを取り除くようにしてください。
(他の開発者に迷惑をかけないためです)


## featureブランチの寿命

あまりに長く`feature`ブランチを伸ばすと、`develop`ブランチとの差異が大きくなり、
マージ時に不具合が出る可能性があります。
以下のようにして、`develop`との差異が大きくならないようにしてください。

- `feature`を小さい単位で開発して`develop`にマージします
- `feature`ブランチが長く伸びる場合は、途中で`develop`の変更を`feature`に取り込みます

`feature`ブランチを`develop`ブランチにマージする前に、(`git fetch`, `git pull`するなどして)
`develop`が伸びていないか確認するようにしましょう。
確認した結果、`develop`との差分が大きい場合は、一度`develop`を`feature`に取り込んで動作確認してから
`develop`にマージするようにしましょう。


## force push禁止

force pushは禁止とします。

無理にrebaseしようとしたりしないようにしましょう。コミットログは汚くなってもかまいません。

`develop`ブランチは、GitBucket上の設定でforce push禁止設定とします。
