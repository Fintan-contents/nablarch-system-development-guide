# プロジェクト・パッケージ構成

## プロジェクト構成

プロジェクト管理システムは、以下の3つのプロジェクトで構成しています。

```
`-proman-project/
  |-proman-common/     : commonプロジェクト
  |-proman-batch/      : バッチ処理方式のプロジェクト
  |-proman-web/        : 画面処理方式のプロジェクト
  :
```

commonプロジェクトは、処理方式に依らない基盤コンポーネントや共通コンポーネント（システム内共通コンポーネント・サブシステム内共通コンポーネント）を配置します。
そして、画面やバッチなどの処理方式ごとのプロジェクトからcommonプロジェクトを参照するように構成しています。

なお、顧客管理システムは処理方式がWebサービスのみなので、単一のプロジェクトで構成しています。

## パッケージ構成

### commonプロジェクトのパッケージ構成

commonプロジェクトのパッケージは、以下の階層で構成します。

| パッケージ階層 | 説明                             | 例                            |
| -------------- | -------------------------------- | ----------------------------- |
| 1～3           | システムを表す識別子             | com.nablarch.example(固定)    |
| 4              | サブシステムを表す識別子         | proman、climan                |
| 5              | commonモジュールの識別子         | common                        |
| 6              | 各コンポーネントを分類する識別子 | code, dao, handler, project等 |


### 各処理方式ごとのプロジェクトのパッケージ構成

各処理方式ごとのプロジェクトのパッケージは、以下の階層で構成します。

| パッケージ階層 | 説明                     | 例                         |
| -------------- | ------------------------ | -------------------------- |
| 1～3           | システムを表す識別子     | com.nablarch.example(固定) |
| 4              | サブシステムを表す識別子 | proman、climan             |
| 5              | モジュールを表す識別子   | web、batch、common、rest   |
| 6              | 機能を表す識別子         | login、project等           |

5階層目のモジュールを表す識別子では、commonか処理方式を表す識別子を使用します。
commonパッケージの下には、その処理方式で使用する基盤コンポーネントやサブシステム内共通コンポーネントを配置します。  
commonプロジェクトにもサブシステム内共通コンポーネントを配置しますが、そちらは他サブシステムや各処理方式から共通コンポーネントを参照する場合に配置します。
一つの処理方式のプロジェクト内だけで使用されるサブシステム内共通コンポーネントは、そのプロジェクト内のcommonパッケージに配置します。

6階層目は機能ごとに作成し、クラスの責務(Action,Form等)を表すパッケージは使用しません。  
機能内共通コンポーネントは、このパッケージに配置します。

以下にクラスの配置例を示します。

![配置例](images/package-structure-example.png)
